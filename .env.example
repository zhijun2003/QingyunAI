# ==========================================
# 清云AI 环境变量配置模板
# ==========================================
#
# 重要说明：
# 清云AI 采用数据库配置管理架构，大部分配置（AI模型、API密钥、功能开关等）
# 都在管理后台配置，此 .env 文件仅包含核心启动配置。
#
# 使用方法：
# 1. 复制此文件为 .env
# 2. 修改下面的配置值
# 3. 其他配置（AI模型、API密钥等）在管理后台配置
#

# ==========================================
# 应用基础配置
# ==========================================
NODE_ENV=development
PORT=3000
APP_URL=http://localhost:3000

# ==========================================
# 数据库配置（PostgreSQL）
# ==========================================
# PostgreSQL 连接字符串
# 格式：postgresql://用户名:密码@主机:端口/数据库名
DATABASE_URL="postgresql://postgres:password@localhost:5432/qingyun_ai"

# 数据库连接池大小
DATABASE_POOL_SIZE=10

# ==========================================
# Redis 配置
# ==========================================
# Redis 连接字符串
REDIS_URL="redis://localhost:6379"

# Redis 数据库索引
REDIS_DB=0

# Redis 密码（如果有）
# REDIS_PASSWORD=""

# ==========================================
# 认证配置
# ==========================================
# JWT 密钥（必须修改为强随机字符串，至少 32 字符）
# 生成方法：node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="change-this-to-a-secure-random-string-at-least-32-characters"

# JWT 过期时间
JWT_ACCESS_EXPIRES_IN="15m"   # Access Token：15分钟
JWT_REFRESH_EXPIRES_IN="7d"   # Refresh Token：7天

# Session Cookie 名称
SESSION_COOKIE_NAME="qingyun_session"

# ==========================================
# 加密密钥（用于加密存储API密钥）
# ==========================================
# AES-256 加密密钥（必须是 64 位十六进制字符串）
# 生成方法：node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="change-this-to-a-64-char-hex-string-for-aes-256-encryption-key"

# ==========================================
# 可选：外部服务配置
# ==========================================

# --- 邮件服务（用于邮箱验证码登录）---
# SMTP 配置
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_SECURE="false"
# SMTP_USER="your-email@gmail.com"
# SMTP_PASS="your-app-password"
# MAIL_FROM_NAME="清云AI"
# MAIL_FROM_ADDRESS="noreply@qingyun-ai.com"

# --- 短信服务（用于手机验证码登录）---
# 阿里云短信
# ALIYUN_SMS_ACCESS_KEY=""
# ALIYUN_SMS_SECRET_KEY=""
# ALIYUN_SMS_SIGN_NAME=""
# ALIYUN_SMS_TEMPLATE_CODE=""

# 腾讯云短信
# TENCENT_SMS_SDK_APP_ID=""
# TENCENT_SMS_APP_KEY=""
# TENCENT_SMS_SIGN=""
# TENCENT_SMS_TEMPLATE_ID=""

# --- 微信公众号配置（用于微信扫码登录）---
# WECHAT_APP_ID="wx..."
# WECHAT_APP_SECRET="..."
# WECHAT_TOKEN=""
# WECHAT_ENCODING_AES_KEY=""

# --- 支付配置 ---
# 支付宝
# ALIPAY_APP_ID=""
# ALIPAY_PRIVATE_KEY=""
# ALIPAY_PUBLIC_KEY=""

# 微信支付
# WECHAT_PAY_MERCHANT_ID=""
# WECHAT_PAY_API_KEY=""

# Stripe（国际支付）
# STRIPE_PUBLIC_KEY=""
# STRIPE_SECRET_KEY=""
# STRIPE_WEBHOOK_SECRET=""

# --- 对象存储配置（用于文件上传）---
# 腾讯云 COS
# COS_SECRET_ID=""
# COS_SECRET_KEY=""
# COS_BUCKET=""
# COS_REGION="ap-guangzhou"

# 阿里云 OSS
# OSS_ACCESS_KEY_ID=""
# OSS_ACCESS_KEY_SECRET=""
# OSS_BUCKET=""
# OSS_REGION=""

# AWS S3
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""
# AWS_S3_BUCKET=""
# AWS_REGION="us-east-1"

# MinIO（自建对象存储）
# MINIO_ENDPOINT="localhost:9000"
# MINIO_ACCESS_KEY=""
# MINIO_SECRET_KEY=""
# MINIO_BUCKET="qingyun-ai"
# MINIO_USE_SSL="false"

# 免费图床（仅图片，如 https://img.scdn.io/）
# IMGBED_API_URL="https://img.scdn.io"
# IMGBED_API_KEY=""  # 如果需要

# --- 监控和日志 ---
# Sentry 错误追踪
# SENTRY_DSN=""
# SENTRY_ENVIRONMENT="development"

# 日志级别（debug, info, warn, error）
LOG_LEVEL="info"

# ==========================================
# 限流配置
# ==========================================
# API 限流（每分钟请求数）
RATE_LIMIT_API=60

# 登录限流（每小时尝试次数）
RATE_LIMIT_LOGIN=10

# 短信发送限流（每天次数）
RATE_LIMIT_SMS_DAILY=10

# ==========================================
# 计费配置（默认值）
# ==========================================
# 注册赠送金额（元）
GIFT_REGISTER_AMOUNT=5.00

# 签到赠送金额（元）
GIFT_SIGNIN_AMOUNT=0.50

# 推荐赠送金额（元）
GIFT_REFERRAL_AMOUNT=10.00

# ==========================================
# 开发调试
# ==========================================
# 开发模式下跳过邮件发送
SKIP_EMAIL_IN_DEV="true"

# 开发模式下跳过短信发送
SKIP_SMS_IN_DEV="true"

# 显示 SQL 查询日志
LOG_SQL="false"

# 启用调试模式
DEBUG="false"

# ==========================================
# 注意事项
# ==========================================
#
# 1. 所有 AI 模型配置、API 密钥都在管理后台配置，不要在这里添加
# 2. JWT_SECRET 和 ENCRYPTION_KEY 必须修改为强随机字符串
# 3. 生产环境必须使用 HTTPS
# 4. DATABASE_URL 和 REDIS_URL 必须配置正确
# 5. 不要将 .env 文件提交到 Git 仓库
# 6. 定期备份数据库
#
